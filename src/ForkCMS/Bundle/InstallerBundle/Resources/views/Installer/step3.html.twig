{% extends 'ForkCMSInstallerBundle:Installer:base.html.twig' %}

{% form_theme form _self %}

{% block content %}
  <h2>Settings</h2>
  {{ form_start(form) }}
    {{ form_errors(form) }}
    <div>
      <h3 class="noPadding">Modules</h3>
      <p>Which modules would you like to install?</p>
      <ul id="moduleList" class="inputList noPadding">
        {{ form_widget(form.modules) }}
      </ul>

      <h3>Example data</h3>
      <p>If you are new to Fork CMS, you might prefer to have an example website with a default theme set up.</p>
      <ul class="inputList noPadding">
        <li>
          {{ form_row(form.example_data)}}
          <span class="helpTxt">(The blog-module is required and will be installed)</span>
        </li>
      </ul>

      <h3>Debug mode</h3>
      <p>Warning: debug mode is only useful when developing on Fork CMS.</p>
      <p>You can enable debug mode by adding "<code>SetEnv FORK_DEBUG 1</code>" in your virtualhosts file.</p>
      <ul class="inputList noPadding">
        <li>
          {{ form_row(form.different_debug_email)}}
          <span class="helpTxt">(Exception emails will be sent to this email address)</span>
        </li>
        <li id="debugEmailHolder">
          {{ form_widget(form.debug_email)}}
        </li>
      </ul>
    </div>
    <div class="fullwidthOptions">
      <div class="buttonHolder">
        <a href="install/2" class="button">Previous</a>
        <input id="installerButton" class="inputButton button mainButton" type="submit" name="installer" value="Next" />
      </div>
    </div>
  {{ form_end(form) }}
{% endblock %}

{# Form theme. Note: this should be global #}
{% block form_errors -%}
  {% if errors|length > 0 -%}
  <div class="formMessage errorMessage">
    <p>
      {%- for error in errors -%}
        {{ error.message }}<br/>
      {%- endfor -%}
    </p>
  </div>
  {%- endif %}
{%- endblock form_errors %}

{% block choice_widget_expanded -%}
  <ul class="inputList" {{ block('widget_container_attributes') }}>
  {%- for child in form %}
      <li>
        {{- form_widget(child, { 'attr' : { 'class' : 'inputRadio' } }) -}}
        {{- form_label(child) -}}
      </li>
  {% endfor -%}
  </ul>
{% endblock choice_widget_expanded %}

{% block checkbox_widget -%}
  <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} class="inputCheckbox" />
{%- endblock checkbox_widget %}

{% block form_widget_simple -%}
  {%- set type = type|default('text') -%}
  <input type="{{ type }}" class="inputText" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
{%- endblock form_widget_simple %}

{% block form_start -%}
  {% set method = method|upper %}
  {%- if method in ["GET", "POST"] -%}
      {% set form_method = method %}
  {%- else -%}
      {% set form_method = "POST" %}
  {%- endif -%}
  <form id="{{ form.vars.name }}" name="{{ form.vars.name }}" method="{{ form_method|lower }}" action="{{ action }}"{% for attrname, attrvalue in attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}{% if multipart %} enctype="multipart/form-data"{% endif %} class="forkForms submitWithLink">
  {%- if form_method != method -%}
      <input type="hidden" name="_method" value="{{ method }}" />
  {%- endif -%}
{%- endblock form_start %}
