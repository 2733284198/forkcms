{% import 'Layout/Templates/macros.html.twig' as macro %}
<table cellspacing="10">
  <tbody>
    {% for row in table %}
      <tr>
        {% for template in row %}
          <td {% spaceless %}
            {% if template.rowspan > 1 %} rowspan="{{ template.rowspan }}"{% endif %}
            {% if template.colspan > 1 %} colspan="{{ template.colspan }}"{% endif %}
            {% if not template.exists %}
            class="empty">
            {% elseif template.large %}
              id="templatePosition-{{ template.value }}" data-position="{{ template.value }}" class="box templatePosition">
            {% else %}
              >
            {% endif %}
            {% endspaceless %}

            {% if not template.exists %}
              &nbsp;
            {% elseif template.large %}
              {{ '{% set form_name="blocks_'|raw ~ template.value|raw ~ '" %}'|raw }}
              {% verbatim %}
              {{ form_row(form.children[form_name])}}
              {% endverbatim %}
            {% else %}
              <a href="#position-{{ template.value }}" title="{{ template.title }}">{{ template.title }}</a>
            {% endif %}
          </td>
        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>
